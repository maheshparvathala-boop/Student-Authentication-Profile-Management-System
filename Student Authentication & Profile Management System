Project layout
student-auth-profile-java/
├─ backend/                      (Spring Boot)
│  ├─ pom.xml
│  └─ src/
│     └─ main/
│        ├─ java/com/example/auth/
│        │   ├─ StudentAuthApplication.java
│        │   ├─ controller/
│        │   │   └─ AuthController.java
│        │   ├─ dto/
│        │   │   ├─ AuthResponse.java
│        │   │   └─ RegisterRequest.java
│        │   ├─ model/
│        │   │   └─ User.java
│        │   ├─ repository/
│        │   │   └─ UserRepository.java
│        │   ├─ service/
│        │   │   ├─ UserService.java
│        │   │   └─ FileStorageService.java
│        │   └─ security/
│        │       ├─ JwtFilter.java
│        │       ├─ JwtUtil.java
│        │       └─ SecurityConfig.java
│        └─ resources/
│            ├─ application.properties
│            └─ static/uploads/   (created at runtime)
└─ frontend/                      (React)
   ├─ package.json
   └─ src/
      ├─ index.js
      ├─ App.js
      ├─ api.js
      ├─ App.css
      └─ components/
         ├─ Register.js
         ├─ Login.js
         └─ Profile.js

BACKEND — Spring Boot
1) pom.xml
<project xmlns="http://maven.apache.org/POM/4.0.0" ...>
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.example</groupId>
  <artifactId>student-auth</artifactId>
  <version>1.0.0</version>
  <packaging>jar</packaging>

  <properties>
    <java.version>17</java.version>
    <spring.boot.version>3.1.0</spring.boot.version>
  </properties>

  <dependencies>
    <!-- Spring Boot -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-web</artifactId>
    </dependency>

    <!-- JPA and MySQL -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-data-jpa</artifactId>
    </dependency>
    <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-j</artifactId>
      <scope>runtime</scope>
    </dependency>

    <!-- Security -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-security</artifactId>
    </dependency>

    <!-- JWT -->
    <dependency>
      <groupId>io.jsonwebtoken</groupId>
      <artifactId>jjwt-api</artifactId>
      <version>0.11.5</version>
    </dependency>
    <dependency>
      <groupId>io.jsonwebtoken</groupId>
      <artifactId>jjwt-impl</artifactId>
      <version>0.11.5</version>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>io.jsonwebtoken</groupId>
      <artifactId>jjwt-jackson</artifactId>
      <version>0.11.5</version>
      <scope>runtime</scope>
    </dependency>

    <!-- file upload -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-validation</artifactId>
    </dependency>

    <!-- Lombok (optional but convenient) -->
    <dependency>
      <groupId>org.projectlombok</groupId>
      <artifactId>lombok</artifactId>
      <optional>true</optional>
    </dependency>

    <!-- Devtools (optional) -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-devtools</artifactId>
      <optional>true</optional>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-maven-plugin</artifactId>
      </plugin>
    </plugins>
  </build>
</project>

2) application.properties
# Server
server.port=5000

# Datasource - change for your MySQL or use H2 for quick testing
spring.datasource.url=jdbc:mysql://localhost:3306/student_auth?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=your_mysql_password
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false

# Upload directory (relative to project root)
app.upload.dir=uploads

# JWT
app.jwt.secret=change_this_to_a_long_random_secret
app.jwt.expiration-ms=604800000  # 7 days


Tip: For testing without MySQL, change datasource to H2 or use an embedded DB.

3) StudentAuthApplication.java
package com.example.auth;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class StudentAuthApplication {
    public static void main(String[] args) {
        SpringApplication.run(StudentAuthApplication.class, args);
    }
}

4) model/User.java
package com.example.auth.model;

import jakarta.persistence.*;
import java.time.Instant;

@Entity
@Table(name = "users")
public class User {
    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String name;

    @Column(unique=true)
    private String email;

    private String passwordHash;

    private String phone;

    private String studentId;

    private String photoUrl;

    private Instant createdAt = Instant.now();

    // getters & setters (or use Lombok @Data)
    // ... generate standard getters/setters
    // For brevity I'll assume you generate them via your IDE or Lombok
}

5) repository/UserRepository.java
package com.example.auth.repository;

import com.example.auth.model.User;
import org.springframework.data.jpa.repository.JpaRepository;
import java.util.Optional;

public interface UserRepository extends JpaRepository<User, Long> {
    Optional<User> findByEmail(String email);
}

6) dto/RegisterRequest.java
package com.example.auth.dto;

public class RegisterRequest {
    public String name;
    public String email;
    public String password;
    public String phone;
    public String studentId;
    // no photo here; photo is multipart in controller
}

7) dto/AuthResponse.java
package com.example.auth.dto;

public class AuthResponse {
    private String token;
    private Long id;
    private String name;
    private String email;
    private String photoUrl;
    // constructors, getters/setters
}

8) service/FileStorageService.java
package com.example.auth.service;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;
import org.springframework.util.StringUtils;
import org.springframework.web.multipart.MultipartFile;

import java.io.File;
import java.io.IOException;
import java.nio.file.*;

@Service
public class FileStorageService {

    private final Path uploadDir;

    public FileStorageService(@Value("${app.upload.dir}") String uploadDir) {
        this.uploadDir = Paths.get(uploadDir).toAbsolutePath().normalize();
        try {
            Files.createDirectories(this.uploadDir);
        } catch (Exception ex) {
            throw new RuntimeException("Could not create upload dir", ex);
        }
    }

    public String storeFile(MultipartFile file) {
        if (file == null || file.isEmpty()) return null;
        String filename = System.currentTimeMillis() + "-" + StringUtils.cleanPath(file.getOriginalFilename());
        try {
            Path target = this.uploadDir.resolve(filename);
            Files.copy(file.getInputStream(), target, StandardCopyOption.REPLACE_EXISTING);
            return "/uploads/" + filename; // accessible via static mapping
        } catch (IOException ex) {
            throw new RuntimeException("Could not store file " + filename, ex);
        }
    }
}

9) service/UserService.java
package com.example.auth.service;

import com.example.auth.model.User;
import com.example.auth.repository.UserRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.stereotype.Service;
import java.util.Optional;

@Service
public class UserService {
    @Autowired private UserRepository userRepo;
    private final BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();

    public boolean existsByEmail(String email) {
        return userRepo.findByEmail(email).isPresent();
    }

    public User createUser(String name, String email, String rawPassword, String phone, String studentId, String photoUrl) {
        User u = new User();
        u.setName(name);
        u.setEmail(email);
        u.setPasswordHash(passwordEncoder.encode(rawPassword));
        u.setPhone(phone);
        u.setStudentId(studentId);
        u.setPhotoUrl(photoUrl);
        return userRepo.save(u);
    }

    public Optional<User> findByEmail(String email) {
        return userRepo.findByEmail(email);
    }

    public Optional<User> findById(Long id) { return userRepo.findById(id); }

    public User update(User user) {
        return userRepo.save(user);
    }

    public boolean checkPassword(User user, String rawPassword) {
        return passwordEncoder.matches(rawPassword, user.getPasswordHash());
    }
}

10) security/JwtUtil.java
package com.example.auth.security;

import io.jsonwebtoken.*;
import io.jsonwebtoken.security.Keys;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;

import java.security.Key;
import java.util.Date;

@Component
public class JwtUtil {

    private final Key key;
    private final long expirationMs;

    public JwtUtil(@Value("${app.jwt.secret}") String secret, @Value("${app.jwt.expiration-ms}") long expirationMs){
        this.key = Keys.hmacShaKeyFor(secret.getBytes());
        this.expirationMs = expirationMs;
    }

    public String generateToken(Long userId){
        Date now = new Date();
        Date exp = new Date(now.getTime() + expirationMs);
        return Jwts.builder()
                .setSubject(String.valueOf(userId))
                .setIssuedAt(now)
                .setExpiration(exp)
                .signWith(key)
                .compact();
    }

    public Long validateAndGetUserId(String token){
        try {
            Claims claims = Jwts.parserBuilder().setSigningKey(key).build().parseClaimsJws(token).getBody();
            return Long.parseLong(claims.getSubject());
        } catch (JwtException | IllegalArgumentException ex) {
            return null;
        }
    }
}

11) security/JwtFilter.java
package com.example.auth.security;

import com.example.auth.model.User;
import com.example.auth.service.UserService;
import jakarta.servlet.FilterChain;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.*;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import org.springframework.web.filter.OncePerRequestFilter;

import java.io.IOException;
import java.util.Optional;

@Component
public class JwtFilter extends OncePerRequestFilter {
    @Autowired private JwtUtil jwtUtil;
    @Autowired private UserService userService;

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)
            throws ServletException, IOException {
        String header = request.getHeader("Authorization");
        if (header != null && header.startsWith("Bearer ")) {
            String token = header.substring(7);
            Long userId = jwtUtil.validateAndGetUserId(token);
            if (userId != null) {
                Optional<User> opt = userService.findById(userId);
                if (opt.isPresent()) {
                    // store user id in request attribute for controllers to use
                    request.setAttribute("currentUser", opt.get());
                }
            }
        }
        filterChain.doFilter(request, response);
    }
}


Note: We attach the current user to request attributes. Controllers read request.getAttribute("currentUser").

12) security/SecurityConfig.java
package com.example.auth.security;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.*;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;

@Configuration
public class SecurityConfig {

    @Autowired private JwtFilter jwtFilter;

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .cors().and().csrf().disable()
            .authorizeHttpRequests()
                .requestMatchers("/api/auth/**", "/uploads/**").permitAll()
                .anyRequest().authenticated()
            .and()
            .addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);

        return http.build();
    }
}

13) controller/AuthController.java
package com.example.auth.controller;

import com.example.auth.model.User;
import com.example.auth.dto.*;
import com.example.auth.service.*;
import com.example.auth.security.JwtUtil;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;

import jakarta.servlet.http.HttpServletRequest;
import java.util.Map;
import java.util.Optional;

@RestController
@RequestMapping("/api/auth")
public class AuthController {

    @Autowired private UserService userService;
    @Autowired private FileStorageService fileStorageService;
    @Autowired private JwtUtil jwtUtil;

    @PostMapping("/register")
    public ResponseEntity<?> register(
            @RequestPart("data") RegisterRequest data,
            @RequestPart(value = "photo", required = false) MultipartFile photo
    ) {
        if (data.email == null || data.password == null || data.name == null) {
            return ResponseEntity.badRequest().body(Map.of("message","Provide name,email,password"));
        }
        if (userService.existsByEmail(data.email)) {
            return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(Map.of("message","User exists"));
        }
        String photoUrl = fileStorageService.storeFile(photo);
        User user = userService.createUser(data.name, data.email, data.password, data.phone, data.studentId, photoUrl);
        String token = jwtUtil.generateToken(user.getId());
        return ResponseEntity.ok(Map.of(
                "token", token,
                "user", Map.of(
                        "id", user.getId(),
                        "name", user.getName(),
                        "email", user.getEmail(),
                        "photoUrl", user.getPhotoUrl()
                )
        ));
    }

    // Alternative JSON register (without multipart) for convenience
    @PostMapping("/register-json")
    public ResponseEntity<?> registerJson(@RequestBody RegisterRequest data) {
        return registerSimple(data, null);
    }

    private ResponseEntity<?> registerSimple(RegisterRequest data, MultipartFile photo) {
        if (data.email == null || data.password == null || data.name == null) {
            return ResponseEntity.badRequest().body(Map.of("message","Provide name,email,password"));
        }
        if (userService.existsByEmail(data.email)) {
            return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(Map.of("message","User exists"));
        }
        String photoUrl = (photo != null) ? fileStorageService.storeFile(photo) : null;
        User user = userService.createUser(data.name, data.email, data.password, data.phone, data.studentId, photoUrl);
        String token = jwtUtil.generateToken(user.getId());
        return ResponseEntity.ok(Map.of(
                "token", token,
                "user", Map.of(
                        "id", user.getId(),
                        "name", user.getName(),
                        "email", user.getEmail(),
                        "photoUrl", user.getPhotoUrl()
                )
        ));
    }

    @PostMapping("/login")
    public ResponseEntity<?> login(@RequestBody Map<String,String> body) {
        String email = body.get("email");
        String password = body.get("password");
        if (email == null || password == null) return ResponseEntity.badRequest().body(Map.of("message","Provide email and password"));

        Optional<User> opt = userService.findByEmail(email);
        if (opt.isEmpty()) return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(Map.of("message","Invalid credentials"));
        User user = opt.get();
        if (!userService.checkPassword(user, password)) return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(Map.of("message","Invalid credentials"));

        String token = jwtUtil.generateToken(user.getId());
        return ResponseEntity.ok(Map.of("token", token, "user", Map.of(
                "id", user.getId(),
                "name", user.getName(),
                "email", user.getEmail(),
                "photoUrl", user.getPhotoUrl()
        )));
    }

    @GetMapping("/me")
    public ResponseEntity<?> me(HttpServletRequest request) {
        User u = (User) request.getAttribute("currentUser");
        if (u == null) return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(Map.of("message","Unauthorized"));
        return ResponseEntity.ok(Map.of(
                "id", u.getId(),
                "name", u.getName(),
                "email", u.getEmail(),
                "phone", u.getPhone(),
                "studentId", u.getStudentId(),
                "photoUrl", u.getPhotoUrl()
        ));
    }

    @PutMapping("/me")
    public ResponseEntity<?> updateProfile(HttpServletRequest request,
                                           @RequestPart(value = "data", required = false) RegisterRequest data,
                                           @RequestPart(value = "photo", required = false) MultipartFile photo) {
        User u = (User) request.getAttribute("currentUser");
        if (u == null) return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(Map.of("message","Unauthorized"));

        if (data != null) {
            if (data.name != null) u.setName(data.name);
            if (data.phone != null) u.setPhone(data.phone);
            if (data.studentId != null) u.setStudentId(data.studentId);
        }
        if (photo != null) {
            String photoUrl = fileStorageService.storeFile(photo);
            u.setPhotoUrl(photoUrl);
        }
        userService.update(u);
        return ResponseEntity.ok(Map.of(
                "id", u.getId(),
                "name", u.getName(),
                "email", u.getEmail(),
                "phone", u.getPhone(),
                "studentId", u.getStudentId(),
                "photoUrl", u.getPhotoUrl()
        ));
    }
}


Note: For multipart endpoints we used @RequestPart("data") RegisterRequest. On the frontend you can send data as a JSON blob in a Blob entry or use the alternative /register-json for JSON-only register.

14) Static serving of uploads

Add in application.properties or in StudentAuthApplication static resource mapping. Easiest: create uploads/ in src/main/resources/static/uploads or configure a resource handler.

Add this bean to main application to map uploads path (optional if files saved under src/main/resources/static/uploads):

import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.*;

@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry
          .addResourceHandler("/uploads/**")
          .addResourceLocations("file:uploads/");
    }
}


This ensures http://localhost:5000/uploads/xyz.jpg serves files from the uploads folder.

FRONTEND — React
frontend/package.json
{
  "name": "student-auth-frontend",
  "version": "1.0.0",
  "private": true,
  "dependencies": {
    "axios": "^1.4.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-scripts": "5.0.1"
  },
  "scripts": {
    "start": "PORT=3000 react-scripts start",
    "build": "react-scripts build"
  }
}

src/index.js
import React from 'react';
import { createRoot } from 'react-dom/client';
import App from './App';
import './App.css';

const root = createRoot(document.getElementById('root'));
root.render(<App />);

src/api.js
import axios from 'axios';
const API_BASE = process.env.REACT_APP_API || 'http://localhost:5000';

const client = axios.create({
  baseURL: API_BASE + '/api',
});

client.interceptors.request.use(cfg => {
  const token = localStorage.getItem('token');
  if (token) cfg.headers.Authorization = `Bearer ${token}`;
  return cfg;
});

export default client;

src/App.css
body { font-family: Arial, sans-serif; background:#f6f8fb; margin:0; padding:0; }
.container { max-width:900px; margin:32px auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 6px 20px rgba(0,0,0,.08); }
.header { display:flex; justify-content:space-between; align-items:center; }
button { padding:8px 12px; border-radius:6px; border:none; cursor:pointer; }
input, label { display:block; width:100%; margin-bottom:8px; padding:8px; box-sizing:border-box; }
.row { display:flex; gap:12px; }
.card { padding:12px; border:1px solid #eee; border-radius:6px; background:#fafafa; }
img.profile { width:120px; height:120px; object-fit:cover; border-radius:50%; border:1px solid #ddd; }

src/App.js
import React, { useEffect, useState } from 'react';
import Register from './components/Register';
import Login from './components/Login';
import Profile from './components/Profile';
import api from './api';

export default function App() {
  const [user, setUser] = useState(null);

  useEffect(() => {
    const token = localStorage.getItem('token');
    if (token) {
      api.get('/auth/me').then(res => setUser(res.data)).catch(()=> {
        localStorage.removeItem('token');
        setUser(null);
      });
    }
  }, []);

  function onLogin(userObj, token) {
    localStorage.setItem('token', token);
    setUser(userObj);
  }

  function onLogout() {
    localStorage.removeItem('token');
    setUser(null);
  }

  return (
    <div className="container">
      <div className="header">
        <h2>Student Auth & Profile</h2>
        <div>{user ? <button onClick={onLogout}>Logout</button> : null}</div>
      </div>

      {!user ? (
        <div className="row">
          <div style={{flex:1}} className="card">
            <h3>Register</h3>
            <Register onSuccess={(u,t)=> onLogin(u,t)} />
          </div>
          <div style={{flex:1}} className="card">
            <h3>Login</h3>
            <Login onSuccess={(u,t)=> onLogin(u,t)} />
          </div>
        </div>
      ) : (
        <Profile user={user} setUser={setUser} />
      )}
    </div>
  );
}

src/components/Register.js
import React, { useState } from 'react';
import api from '../api';

export default function Register({ onSuccess }) {
  const [form, setForm] = useState({ name:'', email:'', password:'', phone:'', studentId:'' });
  const [photo, setPhoto] = useState(null);
  const [msg, setMsg] = useState('');

  async function submit(e) {
    e.preventDefault();
    setMsg('');
    try {
      const data = new FormData();
      // pack JSON as blob under 'data' for register endpoint accepting RequestPart("data")
      const blob = new Blob([JSON.stringify(form)], { type: 'application/json' });
      data.append('data', blob);
      if (photo) data.append('photo', photo);

      const res = await api.post('/auth/register', data, {
        headers: { 'Content-Type': 'multipart/form-data' }
      });
      const { token, user } = res.data;
      onSuccess(user, token);
    } catch (err) {
      setMsg(err?.response?.data?.message || 'Error registering');
    }
  }

  return (
    <form onSubmit={submit}>
      <input placeholder="Full name" value={form.name} onChange={e=>setForm({...form, name:e.target.value})} required />
      <input placeholder="Email" type="email" value={form.email} onChange={e=>setForm({...form, email:e.target.value})} required />
      <input placeholder="Password" type="password" value={form.password} onChange={e=>setForm({...form, password:e.target.value})} required />
      <input placeholder="Phone" value={form.phone} onChange={e=>setForm({...form, phone:e.target.value})} />
      <input placeholder="Student ID" value={form.studentId} onChange={e=>setForm({...form, studentId:e.target.value})} />
      <label>Profile photo (optional)</label>
      <input type="file" onChange={e=>setPhoto(e.target.files[0])} />
      <button type="submit">Register</button>
      <div style={{color:'red', marginTop:8}}>{msg}</div>
    </form>
  );
}

src/components/Login.js
import React, { useState } from 'react';
import api from '../api';

export default function Login({ onSuccess }) {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [msg, setMsg] = useState('');

  async function submit(e) {
    e.preventDefault();
    setMsg('');
    try {
      const res = await api.post('/auth/login', { email, password });
      const { token, user } = res.data;
      onSuccess(user, token);
    } catch (err) {
      setMsg(err?.response?.data?.message || 'Login failed');
    }
  }

  return (
    <form onSubmit={submit}>
      <input placeholder="Email" value={email} onChange={e=>setEmail(e.target.value)} required />
      <input placeholder="Password" type="password" value={password} onChange={e=>setPassword(e.target.value)} required />
      <button type="submit">Login</button>
      <div style={{color:'red', marginTop:8}}>{msg}</div>
    </form>
  );
}

src/components/Profile.js
import React, { useState } from 'react';
import api from '../api';

export default function Profile({ user, setUser }) {
  const [editing, setEditing] = useState(false);
  const [form, setForm] = useState({ name: user.name || '', phone: user.phone || '', studentId: user.studentId || '' });
  const [photo, setPhoto] = useState(null);
  const [msg, setMsg] = useState('');

  async function save(e) {
    e.preventDefault();
    setMsg('');
    try {
      const data = new FormData();
      const blob = new Blob([JSON.stringify(form)], { type: 'application/json' });
      data.append('data', blob);
      if (photo) data.append('photo', photo);

      const res = await api.put('/auth/me', data, { headers: {'Content-Type': 'multipart/form-data'} });
      setUser(res.data);
      setEditing(false);
      setMsg('Saved');
    } catch (err) {
      setMsg(err?.response?.data?.message || 'Error saving');
    }
  }

  const photoUrl = user.photoUrl ? `${(process.env.REACT_APP_API || 'http://localhost:5000')}${user.photoUrl}` : null;

  return (
    <div className="card">
      <h3>Profile</h3>
      <div style={{display:'flex', gap:20, alignItems:'center'}}>
        <div>
          {photoUrl ? <img src={photoUrl} className="profile" alt="profile" /> : <div style={{width:120,height:120,display:'flex',alignItems:'center',justifyContent:'center',background:'#ddd',borderRadius:999}}>No Photo</div>}
        </div>
        <div style={{flex:1}}>
          {!editing ? (
            <>
              <p><strong>Name:</strong> {user.name}</p>
              <p><strong>Email:</strong> {user.email}</p>
              <p><strong>Phone:</strong> {user.phone || '-'}</p>
              <p><strong>Student ID:</strong> {user.studentId || '-'}</p>
              <button onClick={()=>setEditing(true)}>Edit</button>
            </>
          ) : (
            <form onSubmit={save}>
              <input value={form.name} onChange={e=>setForm({...form, name:e.target.value})} />
              <input value={form.phone} onChange={e=>setForm({...form, phone:e.target.value})} />
              <input value={form.studentId} onChange={e=>setForm({...form, studentId:e.target.value})} />
              <label>Change photo</label>
              <input type="file" onChange={e=>setPhoto(e.target.files[0])} />
              <div style={{marginTop:8}}>
                <button type="submit">Save</button>
                <button type="button" onClick={()=>setEditing(false)} style={{marginLeft:8}}>Cancel</button>
              </div>
            </form>
          )}
          <div style={{color:'green', marginTop:8}}>{msg}</div>
        </div>
      </div>
    </div>
  );
}